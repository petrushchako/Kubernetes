# Installing and Configuring Kubernetes

### Table of contents
  - Module Overview
  - Installation Considerations
  - Installation Methods
  - Installation Requirements
  - Understanding Cluster Networking Ports
  - Getting Kubernetes
  - Building your Own Cluster
  - Installing Kubernetes on VMs
  - Lab Environment Overview
  - `Demo`: Installing and configuring containerd
  - `Demo`: Installing and configuring Kubernetes Packages
  - Bootstrapping a Cluster with kubeadm
  - Understanding the Certificate Authority Role in your Cluster
  - kubeadm Created kubeconfig Files and Static Pod Manifests
  - Pod Networking Fundamentals
  - Creating a Cluster Control Plane Node and Adding a Node
  - `Demo`: Creating a Cluster Control Plane Node
  - `Demo`: Adding a Node to Your Cluster
  - Managed Cloud Deployment Scenarious: AKS, EKS, and GKE
  - `Demo`: Creating a Cluster in the Cloud with Azure Kubernetes Service
  - Module Summary and what is next


<br><br><br>


## Module Overview
- Installation Considerations
- Installation Overview
- Getting Kubernetes
- Installing a Cluster with `kubeadm`
- Creating a Cluster in the Cloud



<br><br><br>



## Installation Considerations
When setting up a Kubernetes cluster, several factors must be considered, including deployment location, networking, scalability, and high availability.  

### **Deployment Options**  
1. **Cloud Deployments**  
   - **Infrastructure as a Service (IaaS):**  
     - Deploy Kubernetes on virtual machines (VMs) in the cloud.  
     - The cloud provider manages networking and infrastructure, but you manage OS, patches, and Kubernetes itself.  
   - **Platform as a Service (PaaS):**  
     - Fully managed Kubernetes services (e.g., AWS EKS, Azure AKS, Google GKE).  
     - No need to manage infrastructure, but limited control over Kubernetes versions and features.  
2. **On-Premises Deployments**  
   - **Bare Metal:**  
     - Kubernetes is installed on physical machines, requiring full infrastructure management.  
   - **Virtual Machines (VMs):**  
     - Kubernetes runs on VMs within an on-premises data center, offering a common alternative to bare metal.  

### **Key Considerations Before Installation**  
1. **Networking**  
   - Pods must communicate across nodes without **NAT**.  
   - Choose between **overlay networks** (e.g., Flannel, Calico) or direct Layer 2/3 routing.  
   - Avoid **IP range conflicts** between Kubernetes networking and the existing infrastructure.  
2. **Scalability**  
   - Ensure sufficient **CPU, memory, and storage** across nodes.  
   - Plan capacity to handle **node failures** while maintaining workload availability.  
3. **High Availability & Disaster Recovery**  
   - A **single control plane node** is a single point of failure.  
   - Use **multiple control plane nodes** for redundancy (HA setup).  
   - Maintain **etcd backups** for disaster recovery.  



<br><br><br>



## Installation methods
There are multiple ways to install Kubernetes, each suited for different use cases such as development, testing, and production deployments.  

### **1. Desktop Installations**  
- Ideal for **development and learning**.  
- **Docker Desktop** includes a lightweight Kubernetes cluster:  
  - **Mac:** Kubernetes is integrated into Docker Desktop for easy setup.  
  - **Windows:** Kubernetes support is also available within Docker Desktop.  

### **2. kubeadm (Standard Installation Method)**  
- **kubeadm** is the **preferred tool** for bootstrapping a Kubernetes cluster.  
- Allows for quick setup while maintaining flexibility.  
- This course will focus on installing Kubernetes **on virtual machines using kubeadm**.  

### **3. Cloud-Based Installations**  
- Deploy Kubernetes in the cloud using:  
  - **Infrastructure as a Service (IaaS):** Install Kubernetes on cloud VMs.  
  - **Platform as a Service (PaaS):** Use managed Kubernetes services (AWS EKS, Azure AKS, Google GKE).  
- Cloud options offer scalability and ease of management but may have restrictions on Kubernetes versions and configurations.  

### **Installation Focus in This Course**  
- Kubernetes will be installed on **on-premises virtual machines using kubeadm**.  
- Later, cloud-based Kubernetes deployments will also be explored.



<br><br><br>


## Installation Requirements

When installing Kubernetes on **bare metal** or **virtual machines**, you must meet specific system requirements to ensure a stable cluster.  

### **1. Operating System Requirements**  
- Kubernetes runs on **Linux**.  
- This course will focus on **Ubuntu virtual machines**, but it is also compatible with:  
  - CentOS  
  - Red Hat Enterprise Linux (RHEL)  
  - Other major Linux distributions  
- **Windows worker nodes** exist but are **out of scope** for this course.  

### **2. Hardware Requirements**  
- Minimum requirements for a **lab environment**:  
  - **2 CPUs**  
  - **2 GB RAM**  
- **Production environments** require more resources based on workload demands.  

### **3. System Configuration**  
- **Disable swap** (required for Kubernetes stability).  
- Each node must have a **unique hostname** and **MAC address**.  

### **4. Container Runtime**  
- Kubernetes requires a **Container Runtime Interface (CRI)**-compatible runtime.  
- Supported options:  
  - **containerd** (preferred for this course)  
  - **Docker** (deprecated in Kubernetes **v1.20**, removed in **v1.23**)  
  - **CRI-O**  
- In this course, we will install **containerd**, but example code for **Docker-based clusters** will also be provided.  

### **5. Networking Requirements**  
- **All nodes** in the cluster must have **network connectivity** with each other.  
- Kubernetes **Pod networks** must be configured properly.


<br><br><br>


##